@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@theme inline {
  /* Define all colors in @theme so Tailwind can generate utilities */
  --color-background: var(--bg, oklch(0.144788 0.000000 0.000000));
  --color-foreground: var(--fg, oklch(1.000000 0.000000 0.000000));
  --color-card: var(--c, oklch(0.217787 0.000000 0.000000));
  --color-card-foreground: var(--cf, oklch(1.000000 0.000000 0.000000));
  --color-elevated: var(--e, oklch(0.260325 0.000000 0.000000));
  --color-popover: var(--p, oklch(0.260325 0.000000 0.000000));
  --color-popover-foreground: var(--pf, oklch(1.000000 0.000000 0.000000));
  --color-border: var(--b, oklch(0.285017 0.000000 0.000000));
  --color-input: var(--i, oklch(0.217787 0.000000 0.000000));
  --color-muted: var(--m, oklch(0.551019 0.023361 264.363742));
  --color-muted-foreground: var(--mf, oklch(0.713660 0.019176 261.324645));
  --color-primary: var(--pr, oklch(0.695873 0.149074 162.479602));
  --color-primary-foreground: var(--prf, oklch(0.000000 0.000000 0.000000));
  --color-secondary: var(--s, oklch(0.260325 0.000000 0.000000));
  --color-secondary-foreground: var(--sf, oklch(1.000000 0.000000 0.000000));
  --color-accent: var(--a, oklch(0.695873 0.149074 162.479602));
  --color-accent-foreground: var(--af, oklch(1.000000 0.000000 0.000000));
  --color-destructive: var(--d, oklch(0.636834 0.207849 25.331328));
  --color-destructive-foreground: var(--df, oklch(1.000000 0.000000 0.000000));
  --color-ring: var(--r, oklch(1.000000 0.000000 0.000000));
  --color-success: var(--su, oklch(0.695873 0.149074 162.479602));
  --color-warning: var(--w, oklch(0.768590 0.164659 70.080390));
  --color-error: var(--er, oklch(0.636834 0.207849 25.331328));
  --color-income: var(--inc, oklch(0.695873 0.149074 162.479602));
  --color-expense: var(--exp, oklch(0.710627 0.166148 22.216224));
  --color-transfer: var(--tr, oklch(0.713740 0.143381 254.624021));
  --color-chart-principal: var(--chp, oklch(0.695873 0.149074 162.479602));
  --color-chart-interest: var(--chi, oklch(0.710627 0.166148 22.216224));

  --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 0.875rem;
}

:root {
  color-scheme: dark;
  --radius: 0.75rem;
}

/* Default theme variables (dark-green). Other themes are applied at runtime via applyTheme(). */
:root {
  --bg: oklch(0.144788 0.000000 0.000000);
  --fg: oklch(1.000000 0.000000 0.000000);
  --c: oklch(0.217787 0.000000 0.000000);
  --cf: oklch(1.000000 0.000000 0.000000);
  --e: oklch(0.260325 0.000000 0.000000);
  --p: oklch(0.260325 0.000000 0.000000);
  --pf: oklch(1.000000 0.000000 0.000000);
  --b: oklch(0.285017 0.000000 0.000000);
  --i: oklch(0.217787 0.000000 0.000000);
  --m: oklch(0.551019 0.023361 264.363742);
  --mf: oklch(0.713660 0.019176 261.324645);
  --pr: oklch(0.695873 0.149074 162.479602);
  --prf: oklch(0.000000 0.000000 0.000000);
  --s: oklch(0.260325 0.000000 0.000000);
  --sf: oklch(1.000000 0.000000 0.000000);
  --a: oklch(0.695873 0.149074 162.479602);
  --af: oklch(1.000000 0.000000 0.000000);
  --d: oklch(0.636834 0.207849 25.331328);
  --df: oklch(1.000000 0.000000 0.000000);
  --r: oklch(1.000000 0.000000 0.000000);
  --su: oklch(0.695873 0.149074 162.479602);
  --w: oklch(0.768590 0.164659 70.080390);
  --er: oklch(0.636834 0.207849 25.331328);
  --inc: oklch(0.695873 0.149074 162.479602);
  --exp: oklch(0.710627 0.166148 22.216224);
  --tr: oklch(0.713740 0.143381 254.624021);
  --chp: oklch(0.695873 0.149074 162.479602);
  --chi: oklch(0.710627 0.166148 22.216224);
}

@layer base {
  * {
    border-color: var(--color-border);
    outline-color: oklch(from var(--color-ring) l c h / 0.5);
  }

  html {
    background-color: var(--color-background);
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
    font-family: var(--font-sans), ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }

  body {
    background-color: var(--color-background);
    color: var(--color-foreground);
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
    position: relative;
    font-family: var(--font-sans), ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }

  .font-mono,
  [class*="font-mono"] {
    font-family: var(--font-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  }

  /* Prevent horizontal scroll on all elements */
  #__next,
  [id^="__next"] {
    overflow-x: hidden;
    max-width: 100vw;
  }

  /* Ensure all containers respect viewport width */
  .min-h-screen {
    overflow-x: hidden;
    max-width: 100vw;
  }

  input,
  textarea,
  select {
    background-color: var(--color-input);
    border-color: var(--color-border);
    color: var(--color-foreground);
  }

  input::placeholder,
  textarea::placeholder {
    color: var(--color-muted-foreground);
  }

  /* Responsive table wrapper */
  .table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    max-width: 100%;
  }

  /* Prevent text from causing overflow */
  .truncate-safe {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    min-width: 0;
  }

  /* Ensure buttons don't cause overflow */
  button,
  a {
    max-width: 100%;
  }

  /* Make cards responsive */
  .responsive-card {
    max-width: 100%;
    overflow-x: hidden;
  }

  /* Custom scrollbar for transaction lists and other scrollable components */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: var(--color-muted);
    border-radius: 4px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 4px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: var(--color-foreground);
    opacity: 0.8;
  }

  /* Firefox scrollbar */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) var(--color-muted);
  }
}

/* ============================================
   Landing Page
   ============================================ */

@keyframes landing-fade-up {
  from {
    opacity: 0;
    transform: translateY(28px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes landing-float-1 {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-14px); }
}

@keyframes landing-float-2 {
  0%, 100% { transform: translateY(0) rotate(-1.5deg); }
  50% { transform: translateY(-20px) rotate(-1.5deg); }
}

@keyframes landing-float-3 {
  0%, 100% { transform: translateY(0) rotate(1deg); }
  50% { transform: translateY(-10px) rotate(1deg); }
}

@keyframes landing-glow-pulse {
  0%, 100% { opacity: 0.25; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 0.5; transform: translate(-50%, -50%) scale(1.06); }
}

@keyframes landing-gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.landing-page {
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
  background-color: oklch(0.145 0 0);
  color-scheme: dark;
}

.landing-grain {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 40;
  opacity: 0.028;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
}

.landing-ambient {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(ellipse 80% 50% at 12% 50%, oklch(0.18 0.07 162 / 0.5) 0%, transparent 70%),
    radial-gradient(ellipse 50% 40% at 88% 12%, oklch(0.14 0.04 155 / 0.3) 0%, transparent 55%),
    radial-gradient(ellipse 60% 30% at 50% 92%, oklch(0.12 0.03 145 / 0.2) 0%, transparent 55%);
}

.landing-fade-up {
  opacity: 0;
  animation: landing-fade-up 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.landing-hero-gradient {
  background: linear-gradient(
    135deg,
    oklch(0.90 0.10 162),
    oklch(0.85 0.14 130),
    oklch(0.88 0.12 80)
  );
  background-size: 200% 200%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: landing-gradient-shift 8s ease infinite;
}

.landing-feature-card {
  position: relative;
  background: oklch(0.17 0.004 0 / 0.6);
  border: 1px solid oklch(0.28 0 0 / 0.5);
  border-radius: 1rem;
  padding: 2rem;
  backdrop-filter: blur(12px);
  transition: border-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
  overflow: hidden;
}

.landing-feature-card:hover {
  border-color: oklch(0.38 0 0 / 0.6);
  transform: translateY(-3px);
  box-shadow: 0 12px 40px oklch(0 0 0 / 0.4);
}

.landing-feature-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, oklch(0.45 0 0 / 0.35), transparent);
}

/* ============================================
   Dashboard
   ============================================ */

@keyframes dashboard-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.dashboard-fade-in {
  opacity: 0;
  animation: dashboard-fade-in 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes dashboard-hero-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* ============================================
   Transactions
   ============================================ */

@keyframes tx-row-enter {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.tx-row-enter {
  opacity: 0;
  animation: tx-row-enter 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.tx-row-hover {
  transition: background-color 0.15s ease;
}

.tx-row-hover:hover {
  background-color: color-mix(in oklch, var(--color-elevated) 50%, transparent);
}

/* ============================================
   Accounts
   ============================================ */

@keyframes account-card-enter {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.account-card-enter {
  opacity: 0;
  animation: account-card-enter 0.35s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* ============================================
   Calendar
   ============================================ */

@keyframes calendar-row-enter {
  from {
    opacity: 0;
    transform: translateY(3px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.calendar-row-enter {
  opacity: 0;
  animation: calendar-row-enter 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes day-brief-item-enter {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.day-brief-item {
  opacity: 0;
  animation: day-brief-item-enter 0.22s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}
