---
description: Core project information, tech stack, and project structure for Unified Ledger finance app
alwaysApply: true
---

# Unified Ledger - Finance App Project

## Project Overview
A comprehensive mobile-first personal finance application built with Next.js, featuring transaction tracking, bill management, budgeting, and household financial collaboration.

## Tech Stack
- **Framework:** Next.js 16 (App Router) + React 19 + TypeScript 5.9
- **Styling:** Tailwind CSS v4 + shadcn/ui (17 components)
- **Database:** SQLite with Drizzle ORM
- **Authentication:** Better Auth (fully migrated from Clerk - 100% complete)
- **Package Manager:** pnpm
- **PWA:** next-pwa (temporarily disabled - awaiting Next.js 16 Turbopack support)

## Critical Dependencies
- `decimal.js@10.6.0` - Precise financial calculations (ALWAYS use for money)
- `fastest-levenshtein@1.0.16` - String similarity for duplicate detection
- `papaparse@5.5.3` - CSV parsing
- `recharts@3.3.0` - Charts
- `sonner@2.0.7` - Toast notifications
- `uuid@13.0.0` - UUID generation for database records
- `sharp@0.34.5` - Image processing and optimization for avatars
- `resend@6.4.2` - Email delivery service (primary email provider)
- `nodemailer@7.0.10` - SMTP email client (fallback for self-hosting)
- `react-email@5.0.4` + `@react-email/components@1.0.1` - Email template system

## Project Structure
```
unifiedledger/
├── app/
│   ├── api/                      # API routes (transactions, accounts, bills, rules, settings, etc.)
│   └── dashboard/                # All dashboard pages (main, transactions, accounts, bills, calendar, goals, debts, reports, tax, sales-tax, settings, etc.)
├── components/
│   ├── ui/                       # shadcn/ui components
│   ├── transactions/             # Transaction components
│   ├── accounts/                 # Account components
│   ├── bills/                    # Bill components
│   ├── rules/                    # Rules builder
│   ├── charts/                   # Chart components
│   ├── navigation/               # Sidebar + mobile nav
│   ├── settings/                 # Settings page tabs
│   └── [others]/                 # Goals, debts, tags, etc.
├── lib/
│   ├── db/                       # schema.ts, index.ts
│   ├── themes/                   # theme-config.ts, theme-utils.ts
│   ├── rules/                    # Rules engine
│   ├── bills/                    # Bill matching
│   ├── notifications/            # Notification service
│   ├── email/                    # Email service (Resend + SMTP providers)
│   ├── tax/                      # Tax utilities
│   ├── sales-tax/                # Sales tax utilities
│   ├── avatar-client-utils.ts    # Client-safe avatar utilities
│   └── avatar-utils.ts           # Server-only avatar utilities (sharp)
└── docs/                         # Documentation
```

## Key Features Summary

**All 8 phases complete (100%):**
1. ✅ **Foundation:** Transaction entry (income/expense/transfer), multi-account, categories, merchants, templates, household management
2. ✅ **Intelligence:** Usage tracking, smart categorization, rules system (14 operators, 11 action types), transaction history, splits, advanced search, duplicate detection, CSV import
3. ✅ **Accounts & Calendar:** Transfers with usage-based suggestions, calendar view (month/week), account filtering
4. ✅ **Bills & Budgets:** Auto-detection, payment matching, budget tracking with adherence scoring, templates, variable bill tracking, tags, custom fields, notifications (10 types)
5. ✅ **Goals & Activity:** Savings goals with milestones, debt management with payoff projections, household activity audit trail
6. ✅ **Mobile & Performance:** Offline mode (IndexedDB queue), household system with roles, responsive navigation, service worker caching, performance monitoring, data cleanup cron jobs
7. ✅ **Reporting & Tax:** 6 report types with 7 chart types, tax dashboard, sales tax quarterly reporting (all 50 states), credit utilization tracking, collapsible debt cards
8. ✅ **Testing:** 386 tests (99.5% of plan), 100% unit test coverage, 93% integration test coverage (28/30 passing)
